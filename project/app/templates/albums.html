<!-- Albums Table -->
<div class="box content-box" id="tracks-content">
    <h2 class="title is-4">Albums</h2>
    <p class="subtitle is-6">Browse through our music collection</p>

    <div class="table-container">
        <table class="table is-fullwidth is-striped is-hoverable">
            <thead>
            <tr>
                <th style="width: 40%">
                    Album
                    <span class="icon sort-icon" data-sort="album">
                        <i
                                hx-get="/application/albums"
                                hx-trigger="click"
                                hx-vals='js:{
                                "sort": event.target.dataset.sort,
                                "direction": event.target.dataset.direction
                            }'
                                hx-include="#itemsPerPage"
                                hx-target="#table-content"
                                class="fas fa-sort"
                                data-sort="album_title"
                                data-direction="desc"
                                _="on click
                                 -- Reset all <i> elements' classes to fa-sort
                                 set icons to <i/> in closest <tr/>
                                 remove .fa-sort-down .fa-sort-up from icons
                                 add .fa-sort to icons
                                   
                                 -- set clicked icon's direction and class
                                 if @data-direction == 'asc'
                                    set @data-direction to 'desc'
                                    remove .fa-sort-up .fa-sort from me
                                    add .fa-sort-down to me                                    
                                 else
                                    set @data-direction to 'asc'
                                    remove .fa-sort-down .fa-sort from me
                                    add .fa-sort-up to me
                                 end
                            "
                        >
                        </i>
                    </span>
                </th>
                <th style="width: 30%">
                    Artist
                    <span class="icon sort-icon" data-sort="artist">
                        <i
                                hx-get="/application/albums"
                                hx-trigger="click"
                                hx-vals='js:{
                                "sort": event.target.dataset.sort,
                                "direction": event.target.dataset.direction
                            }'
                                hx-include="#itemsPerPage"
                                hx-target="#table-content"
                                class="fas fa-sort"
                                data-sort="album_artist"
                                data-direction="desc"
                                _="on click
                                 -- Reset all <i> elements' classes to fa-sort
                                 set icons to <i/> in closest <tr/>
                                 remove .fa-sort-down .fa-sort-up from icons
                                 add .fa-sort to icons
                                   
                                 -- set clicked icon's direction and class
                                 if @data-direction == 'asc'
                                    set @data-direction to 'desc'
                                    remove .fa-sort-up .fa-sort from me
                                    add .fa-sort-down to me                                    
                                 else
                                    set @data-direction to 'asc'
                                    remove .fa-sort-down .fa-sort from me
                                    add .fa-sort-up to me
                                 end
                            "
                        >
                        </i>
                    </span>
                </th>
                <th style="width: 10%">
                    Duration
                    <span class="icon sort-icon" data-sort="duration">
                        <i
                                hx-get="/application/albums"
                                hx-trigger="click"
                                hx-vals='js:{
                                "sort": event.target.dataset.sort,
                                "direction": event.target.dataset.direction
                            }'
                                hx-include="#itemsPerPage"
                                hx-target="#table-content"
                                class="fas fa-sort"
                                data-sort="album_duration"
                                data-direction="desc"
                                _="on click
                                 -- Reset all <i> elements' classes to fa-sort
                                 set icons to <i/> in closest <tr/>
                                 remove .fa-sort-down .fa-sort-up from icons
                                 add .fa-sort to icons
                                   
                                 -- set clicked icon's direction and class
                                 if @data-direction == 'asc'
                                    set @data-direction to 'desc'
                                    remove .fa-sort-up .fa-sort from me
                                    add .fa-sort-down to me                                    
                                 else
                                    set @data-direction to 'asc'
                                    remove .fa-sort-down .fa-sort from me
                                    add .fa-sort-up to me
                                 end
                            "
                        >
                        </i>
                    </span>
                </th>
                <th style="width: 10%">
                    Price
                    <span class="icon sort-icon" data-sort="price">
                        <i
                                hx-get="/application/albums"
                                hx-trigger="click"
                                hx-vals='js:{
                                "sort": event.target.dataset.sort,
                                "direction": event.target.dataset.direction
                            }'
                                hx-include="#itemsPerPage"
                                hx-target="#table-content"
                                class="fas fa-sort"
                                data-sort="album_price"
                                data-direction="desc"
                                _="on click
                                 -- Reset all <i> elements' classes to fa-sort
                                 set icons to <i/> in closest <tr/>
                                 remove .fa-sort-down .fa-sort-up from icons
                                 add .fa-sort to icons
                                   
                                 -- set clicked icon's direction and class
                                 if @data-direction == 'asc'
                                    set @data-direction to 'desc'
                                    remove .fa-sort-up .fa-sort from me
                                    add .fa-sort-down to me                                    
                                 else
                                    set @data-direction to 'asc'
                                    remove .fa-sort-down .fa-sort from me
                                    add .fa-sort-up to me
                                 end
                            "
                        >
                        </i>
                    </span>
                </th>
                <th style="width: 10%">Actions</th>
            </tr>
            </thead>
            <!-- Populated by htmx -->
            <tbody
                id="table-content"
                hx-get="/application/albums"
                hx-trigger="load"
            >
            </tbody>
        </table>
    </div>

    <!-- Pagination -->
    <nav class="pagination is-centered" role="navigation" aria-label="pagination">
        <a class="pagination-previous">Previous</a>
        <a class="pagination-next">Next</a>
        <ul class="pagination-list">
            <!-- Populated by JavaScript -->
        </ul>
    </nav>
</div>
